---
title: "ERP数据预处理基本流程"
layout: post
category: EEG
tags: [matlab, eeglab, 预处理]
excerpt: "实验室最近采集的脑电数据还挺多的，而且很多小伙伴对脑电数据处理的流程还很陌生，因此我想写几篇脑电数据处理的技术文章，从ERP的预处理一直到高级分析，力争做到看完文章之后可以掌握ERP常见分析方法。今天这篇文章是第一篇，主要针对ERP预处理"
---
实验室最近采集的脑电数据还挺多的，而且很多小伙伴对脑电数据处理的流程还很陌生，因此我想写几篇脑电数据处理的技术文章，从ERP的预处理一直到高级分析，力争做到看完文章之后可以掌握ERP常见分析方法。今天这篇文章是第一篇，主要针对ERP预处理。在正式进行数据处理之前需要安装matlab软件，以及eeglab插件。
# Matlab 的下载安装
ACR实验室的小伙伴们可以直接从实验室私有云上下载与自己电脑相应的Matlab版本（私有云下载matlab的路径：/ACR_lab/Documents/软件库/Matlab and toolbox）以及eeglab插件（私有云下载eeglab插件的路径：/ACR_lab/Documents/ERP and EEG/EEGLAB资料）。下载完成后，开始安装，安装教程直接从百度上搜（例如：matlab2014a的安装与激活教程参考: <https://jingyan.baidu.com/article/ab69b2709a7e0b2ca6189f10.html>）。一般教程上写的都比较清楚，按照上面一步一步操作即可。
# eeglab 插件的导入
打开matlab的界面是这样的：

![p1](/images/posts/20190228/p1.png)

如上图所示，在主页面中间，有一个“设置路径”（set path）按钮，鼠标单击打开之后如下：

![p2](/images/posts/20190228/p2.png)

在如上图所示的对话框中点击“添加并包含子文件夹”(add with subfolders)按钮，然后在自己的电脑上找到之前从私有云上下载并解压好的eeglab工具包文件夹，将其导入matlab中，然后依次点击“保存”和“关闭”。那么，如何判断你的eeglab插件是否导入成功了呢？可以进行如下操作：

![p3](/images/posts/20190228/p3.png)

如上图所示，在matlab的命令行窗口键入`eeglab`并按回车键

![p4](/images/posts/20190228/p4.png)

如果你按了回车键出现了以上界面，那么恭喜你，安装成功！至此，环境配置任务算是完成了，接下来，就进入预处理的正式流程了。

# ERP数据预处理基本流程
此处预处理的基本流程参考自胡理老师实验室的经典流程，即"九步走"流程：

- __1.导入数据__
- __2.定位电极__
- __3.剔除无用电极__
- __4.重参考__
- __5.滤波__
- __6.分段__
- __7.插值坏导和剔除坏段__
- __8.Run ICA__
- __9.剔除眼动成分等__

## 1.导入数据
我们学部脑电设备用的是BP系统，每个被试完成实验之后，电脑上会自动保存3份数据，类型分别是"eeg","vhdr","vmrk"。
在我们刚刚打开的eeglab窗口中的菜单栏中，点击以下菜单：

![p5](/images/posts/20190228/p5.png)

点击之后从自己的电脑上寻找储存原始数据的文件夹，然后一路点击"OK"，然后就会出现以下界面：

![p6](/images/posts/20190228/p6.png)

+ __“Filename”__ 是文件的命名，因为刚刚省去了命名过程，所以此处显示“none”
+ __“Channels per frame”__ 是指当前你导入的这个被试的有效电极点的数目，此处显示有效电极为31个
+ __“Frames per epoch”__ 指的是每段数据的采样点数，因为目前还没有进行分段，因此当前显示的是整个数据的采样点
+ __“Epochs”__ 指的是分段的数目，目前还未分段，所以显示为1
+ __“Events”__ 指的是Mark的数目，此处显示为478，表明该被试一共打了478个Mark
+ __“Sampling rate (HZ)”__ 指的是采样率，此处采样率为1000HZ，表示每隔1ms就打一个点
+ __“Epoch start (sec)”__ 每段数据开始的时间
+ __“Epoch end (sec)”__ 每段数据结束的时间
+ __“Reference”__ 指的是重参考，此处显示为未知
+ __“Channel locations”__ 指的是电极定位，此处显示为未定位
+ __“ICA weights”__ 指的是ICA，还没有run ICA,因此此处显示为No
+ __"Dataset size (Mb)"__ 指的是数据的大小
